### **技术组** 
**视觉组（自瞄方向）** 

**姓名** 
卢祥云 

---

### **个人经历** 
我是在2024年暑假通过夏招考核加入视觉组的.刚入队的时候，我们几个新人由何秋洋带着调了一下老全向的自瞄，现在回想起来，当时主要是调了静态方法，并没有调完自瞄调试的全流程，但是我们当时代码都不熟，也很难教会我们调车的全部流程。第一个月的时候，我们被要求自己独立看代码。在老代码写得晦涩难懂，既没有较好的文档有没有老登带着调车的情况下，我个人基本上没看懂多少内容。 

24年10月开始，新队员开始陆续被安排任务.这段时间我负责将老代码中识别装甲板并进行坐标解算的部分迁移至ros2的新框架，并且在后续的11月至12月将老代码的卡尔曼滤波以及tracker迁移至新框架.加上已有的相机模块以及通讯模块，至此，装甲板的自瞄部分的全流程已经迁移完毕.寒假以及寒假回来的一个月中，我和何秋洋一起上车测试新框架，致力于解决新框架云台抖头的怪问题，期间找到了许多小bug，但是没有找到根本问题.这一问题最后是在3月联盟赛前夕由黄浚航解决的。 

4月份的时候，何秋洋安排我花两个星期向新框架迁移前哨站滤波并进行测试，我在第一个星期迁移完毕代码，但是第二个星期，由于车辆状态等问题，一直没找到机会测试.5月份的时候，我将能量机关的滤波，拟合，tracker等功能迁入新框架，并且完成了测试.后续分区赛的期间，我和黄浚航一起优化了能量机关的解算部分。 

---

## **个人经验与教训总结** 

1.**新人培训方面** 
    我认为刚入队就教新人调车并不合适，因为新人根本不懂代码.根本不懂代码的情况下教新人调车，即使记住了怎么调，也没能理解，后面还容易忘记.同时，我们自己独立看代码的效率比较低，主要是还是没感受到压力，看代码的时候都是自己随便看看，老代码晦涩难懂，光自己看肯定看不懂，再加上没有压力，看不懂也不会去问问题.我认为可以从这个时候开始就给新人安排任务，给新人一定看代码的时间，到了点就由新人向老登讲解代码和算法的详细内容。 
    另一方面，老登应当完善技术文档，视觉组并没有比较好的资料。 
    同时，新人应当一边调车一边看代码，而不是在第一个星期集中学调车。  调车的时候老登最好要有引导，也要和电控小登联调。 
    小登对代码以及调车的熟悉应当在刚入队的两个月之内完成。 

2.**规划问题** 
    新人在24年下半年的10月被安排了任务.我花了将近三个月的时间将装甲板自瞄除了相机和通讯的模块都从老框架迁入了新框架.迁移并不只是复制粘贴，还要写一些别的内容.当时刚入队，确实很菜，写的东西有很多问题，这些问题在后续的调试过程中才一点点被发现，有些问题至今都没有得到很好的解决.刚入队的时候很菜，写的东西有问题，这很正常，后续调试的过程中都可以慢慢解决，问题在于速度太慢，以一种松散的态度，花了整整三个月的时间才完成了迁移，全然没有想到后续需要这么长的时间才完成了任务.甚至我记得，在新人中，我完成任务的速度还算快的.这里主要是自己对于任务的规划完全没有概念，同时也希望老登在小登完成任务的时候可以狠狠push一下，因为小登是真的没有什么规划概念。 
    另一方面，24年下半年其他新人也实现了一些功能，如自动标定，还要小弹丸识别等，后续都没有用到，显得有些可惜，这也是当时没计划好导致的。 
    还要调车问题，从刚入队到联盟赛前夕，仅有寒假期间为了调试新框架而上车调试过，其他时候都没有调试过自瞄，到了分区赛前夕，我还没有独立调试过自瞄全流程的代码。  考虑到新车状况不稳定，难以满足自瞄的教学要求，应当在24下半年强化调车能力才对。 
    后续4月份调试前哨站滤波的时候，我认为两个星期绰绰有余，加上手头有别的事情，第一个星期只完成了代码的迁移，想着剩下一个星期调完绰绰有余，哪想到第二个星期连车辆状况差到连调车的机会都没有多少。  事情还是早完成为好。 
    再次，能量机关一直到四月底才开始有进展，我在此前甚至都没怎么关注过能量机关的部分，一直到4月底才知道需要要去做这么一件事，导致后期能量机关的调试一直很急迫，这是我的疏忽。 
    此外，原本的视觉算法并不完善。  我个人在打完分区赛之前，对代码的熟悉程度也没有高到可以洞察漏洞的地步。  不过这一点感觉也可以由老登提早告知小登。 

---

### **对队伍的建议** 

1.视觉组一定需要有人在管理或开会的时候说话。  这一年视觉几乎都是新人，没有经历过一个完整的赛季，对备赛的流程以及周期包括比赛的内容都不了解，也没有足够的资历和能力在会上发声.视觉为了自己的调车需要，应当积极地催促机械以及电控的进度，这一点是视觉的疏忽。 
2.组间交流要做好.从我的视角来看，视觉的新框架需要开发和启用，但是远没有成熟到非常好用的地步.在联盟赛之前，我们也打算启用老代码而不是新代码(至少我是这样想的).之所以启用新代码，是因为联盟赛前夕电控突然要改通讯，而视觉的老框架不适合改通讯，所以被迫启用了新代码。 
3.管理层一定要做好规划，一定要push成员以在规定时间内完成目标.今年失败的最大原因还是因为没有按部就班地完成目标，进度一拖再拖，导致最后完全没有准备好.建议在赛季初的时候就制定一个较大的时间安排（不能只是管理层知道，队里所有成员都需要知道时间规划），并且积极地检查各个组的进度。 

---

### **未来规划** 
下个赛季我会留队，但是毕竟大三了，可能会有一些别的事情。 

我从我的角度说说我觉得视觉组还需要做点什么： 
1.  从代码层面优化新代码，让新代码更加优美，如config，convertor等。 现在的代码很难用“优美”这个词来形容。 
2.  完善代码的技术文档，完完整整地梳理完代码的一整套逻辑与算法。 
3.  对于x，y，z，yaw，pitch，roll，要有统一的标准，什么方向是正的，什么方向是负的。 
4.  优化tf的时间戳对齐问题，这个可能需要和电控配合。 
5.  优化additional time，要有一种确切的方式算出各个时间。  个人现在认为有以下几个时间的计算需要优化： 
    * GetImage的时间，根据我使用过的相机，获取图像的时间在0.1ms到5ms不等，联盟赛的哨兵甚至出现了30ms的巨额支出。  如果这个时间太长，会影响到我们的tf对齐以及后续的tracker的计算。 
    * 处理一张图像的时间 
    * Tracker算出结果到传到通讯节点的时间。 
    * 通讯节点开始传输到电控收到的时间 
    * 电控收到到电控转到我们需要的yaw角的时间 
    * 电控打出一发子弹需要的时间 
6.  考虑是否完全使用tf，放弃convertor 
7.  新代码是多线程，老代码是单线程，但是新代码的运行速度并不比老代码强，是否有优化空间 
8.  能量机关的神经网络识别太差，过于依赖传统视觉，导致识别不稳定.同时其算出来的中心点坐标、angle以及半径等都存在很大的误差，需要改善。 
9. 是否需要更多地使用nx？  个人感觉也可以试试RGBD相机 

另外，传承的问题.nx的部分何秋洋比较熟，能量机关的部分我比较熟，神经网络目前主力没有比较熟悉的，需要熟悉一下.雷达和工程也需要有人接手，不能太晚。